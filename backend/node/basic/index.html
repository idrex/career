<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="/logo.svg" />
    <link rel="stylesheet" href="/umi.css" />
    <script>
      window.routerBase = "/";
    </script>
    <script>
      //! umi version: 3.2.28
    </script>
    <title>Node 基础</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/logo.svg&#x27;)" href="/">Drex</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="/guide">指南</a><a href="/fontend">前端</a><a aria-current="page" class="active" href="/backend">后端</a><a href="/devops">运维</a><a href="/blog">博客</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/idrex/career">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/logo.svg&#x27;)" href="/"></a><h1>Drex</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/guide">指南</a></li><li><a href="/fontend">前端</a></li><li><a aria-current="page" class="active" href="/backend">后端</a></li><li><a href="/devops">运维</a></li><li><a href="/blog">博客</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/idrex/career">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a href="/backend">后端体系图</a></li><li><a href="/backend/network">网络基础</a><ul><li><a href="/backend/network/api"><span>接口选型</span></a></li><li><a href="/backend/network/graphql"><span>GraphQL</span></a></li><li><a href="/backend/network/network"><span>网络协议</span></a></li></ul></li><li><a href="/backend/system">Web服务器</a><ul><li><a href="/backend/system/nginx"><span>Nginx</span></a></li></ul></li><li><a href="/backend/database">数据库</a><ul><li><a href="/backend/database/postgre-sql"><span>PostgreSQL</span></a></li><li><a href="/backend/database/my-sql"><span>MySQL</span></a></li><li><a href="/backend/database/table-store"><span>TableStore</span></a></li><li><a href="/backend/database/sequelize"><span>Sequelize</span></a></li><li><a href="/backend/database/redis"><span>Redis</span></a></li></ul></li><li><a aria-current="page" class="active" href="/backend/node">Node</a><ul><li><a aria-current="page" class="active" href="/backend/node/basic"><span>Node 基础</span></a></li><li><a href="/backend/node/evenloop"><span>Node 事件循环</span></a></li><li><a href="/backend/node/yarn&amp;npm&amp;cnpm"><span>yarn、npm、cnpm 对比分析</span></a></li></ul></li><li><a href="/backend/test">测试</a><ul><li><a href="/backend/test/utils"><span>测试工具</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="简介" data-depth="2" class=""><a href="/backend/node/basic#简介"><span>简介</span></a></li><li title="特点" data-depth="3" class=""><a href="/backend/node/basic#特点"><span>特点</span></a></li><li title="应用" data-depth="3" class=""><a href="/backend/node/basic#应用"><span>应用</span></a></li><li title="注意" data-depth="2" class=""><a href="/backend/node/basic#注意"><span>注意</span></a></li><li title="模块" data-depth="2" class=""><a href="/backend/node/basic#模块"><span>模块</span></a></li><li title="基本模块" data-depth="3" class=""><a href="/backend/node/basic#基本模块"><span>基本模块</span></a></li><li title="异步编程" data-depth="2" class=""><a href="/backend/node/basic#异步编程"><span>异步编程</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="node-基础"><a aria-hidden="true" href="#node-基础"><span class="icon icon-link"></span></a>Node 基础</h1><h2 id="简介"><a aria-hidden="true" href="#简介"><span class="icon icon-link"></span></a>简介</h2><p><code>Node</code> 拓展了 <code>JavaScript</code> 的边界，使 <code>JavaScript</code> 在服务端大放异彩。</p><h3 id="特点"><a aria-hidden="true" href="#特点"><span class="icon icon-link"></span></a>特点</h3><ul><li>异步 <code>I/O</code>: 减少同步调用耗时问题</li><li>事件和回调函数: 轻量级、松耦合、只关注事务点等优势</li><li>单线程: 不需要处理多线程状态同步问题，减少线程上下文交换带来的性能开销，缺点：应用的健壮性值得考验</li><li>跨平台: 通过 <code>libuv</code> 实现跨平台</li></ul><h3 id="应用"><a aria-hidden="true" href="#应用"><span class="icon icon-link"></span></a>应用</h3><ul><li><code>I/O</code> 密集型应用: 利用事件循环的处理能力，资源占用极少</li><li>并行 <code>I/O</code>: 采用并行请求，加速 <code>Web</code> 渲染速度</li><li>云计算服务: 底资源占用，高性能的特点带来的开发优势</li><li>工具类应用: 前端构建打包工具 <code>Webpack</code>，<code>Rollup</code> 等</li></ul><h2 id="注意"><a aria-hidden="true" href="#注意"><span class="icon icon-link"></span></a>注意</h2><ul><li><code>Node</code> 的单线程指 <code>JavaScript</code> 执行在单线程中，内部完成 <code>I/O</code> 任务另有线程池</li></ul><h2 id="模块"><a aria-hidden="true" href="#模块"><span class="icon icon-link"></span></a>模块</h2><h3 id="基本模块"><a aria-hidden="true" href="#基本模块"><span class="icon icon-link"></span></a>基本模块</h3><h4 id="fs-文件系统模块"><a aria-hidden="true" href="#fs-文件系统模块"><span class="icon icon-link"></span></a>fs 文件系统模块</h4><p><code>Node.js</code> 内置的 <code>fs</code> 模块就是文件系统模块，负责读写文件，同时提供了异步和同步的方法。</p><p>由于 <code>Node</code> 环境执行的 <code>JavaScript</code> 代码是服务器端代码，所以，绝大部分需要在服务器运行期反复执行业务逻辑的代码，必须使用异步代码，否则，同步代码在执行时期，服务器将停止响应，因为 <code>JavaScript</code> 只有一个执行线程。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="const fs = require(&quot;fs&quot;);
// 同步读文件
var data = fs.readFileSync(&quot;file.txt&quot;, &quot;utf-8&quot;);
console.log(data);

// 异步读文件
fs.readFile(&quot;file.txt&quot;, &quot;utf-8&quot;, function(err, data) {
  if (err) {
    console.log(err);
  } else {
    console.log(data);
  }
});

// 写文件
var data = &quot;Hello, Node.js&quot;;
fs.writeFile(&quot;output.txt&quot;, data, function(err) {
  if (err) {
    console.log(err);
  } else {
    console.log(&quot;ok.&quot;);
  }
});

// 获取文件或目录的详细信息
fs.stat(&quot;file.txt&quot;, function(err, stat) {
  if (err) {
    console.log(err);
  } else {
    // 是否是文件:
    console.log(&quot;isFile: &quot; + stat.isFile());
    // 是否是目录:
    console.log(&quot;isDirectory: &quot; + stat.isDirectory());
    if (stat.isFile()) {
      // 文件大小:
      console.log(&quot;size: &quot; + stat.size);
      // 创建时间, Date对象:
      console.log(&quot;birth time: &quot; + stat.birthtime);
      // 修改时间, Date对象:
      console.log(&quot;modified time: &quot; + stat.mtime);
    }
  }
});
" data-status="copy"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> fs </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 同步读文件</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">var</span><span class="token plain"> data </span><span class="token operator">=</span><span class="token plain"> fs</span><span class="token punctuation">.</span><span class="token method function property-access">readFileSync</span><span class="token punctuation">(</span><span class="token string">&quot;file.txt&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">data</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 异步读文件</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">fs</span><span class="token punctuation">.</span><span class="token method function property-access">readFile</span><span class="token punctuation">(</span><span class="token string">&quot;file.txt&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token parameter punctuation">,</span><span class="token parameter"> data</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">err</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">err</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">else</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">data</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 写文件</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">var</span><span class="token plain"> data </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&quot;Hello, Node.js&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">fs</span><span class="token punctuation">.</span><span class="token method function property-access">writeFile</span><span class="token punctuation">(</span><span class="token string">&quot;output.txt&quot;</span><span class="token punctuation">,</span><span class="token plain"> data</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">err</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">err</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">else</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&quot;ok.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 获取文件或目录的详细信息</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">fs</span><span class="token punctuation">.</span><span class="token method function property-access">stat</span><span class="token punctuation">(</span><span class="token string">&quot;file.txt&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token parameter punctuation">,</span><span class="token parameter"> stat</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">err</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">err</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword">else</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 是否是文件:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&quot;isFile: &quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> stat</span><span class="token punctuation">.</span><span class="token method function property-access">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 是否是目录:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&quot;isDirectory: &quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> stat</span><span class="token punctuation">.</span><span class="token method function property-access">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">stat</span><span class="token punctuation">.</span><span class="token method function property-access">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// 文件大小:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&quot;size: &quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> stat</span><span class="token punctuation">.</span><span class="token property-access">size</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// 创建时间, Date对象:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&quot;birth time: &quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> stat</span><span class="token punctuation">.</span><span class="token property-access">birthtime</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// 修改时间, Date对象:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&quot;modified time: &quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> stat</span><span class="token punctuation">.</span><span class="token property-access">mtime</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="path-路径模块"><a aria-hidden="true" href="#path-路径模块"><span class="icon icon-link"></span></a>path 路径模块</h4><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="const path = require(&quot;path&quot;);

let str = &quot;/root/a/b/index.html&quot;;
console.log(path.dirname(str)); // 路径
// /root/a/b
console.log(path.extname(str)); // 后缀名
// .html
console.log(path.basename(str)); // 文件名
// index.html

// path.resolve() 路径解析，简单来说就是拼凑路径，最终返回一个绝对路径
let pathOne = path.resolve(&quot;rooot/a/b&quot;, &quot;../c&quot;, &quot;d&quot;, &quot;..&quot;, &quot;e&quot;);

// 一般用来打印绝对路径，就像下面这样，其中 __dirname 指的就是当前目录
let pathTwo = path.resolve(__dirname, &quot;build&quot;); // 这个用法很常见，你应该在 webpack 中有见过

console.log(pathOne, pathTwo, __dirname);
// pathOne  =&gt;  /Users/lgq/Desktop/node/rooot/a/c/e
// pathTwo  =&gt;  /Users/lgq/Desktop/node/build
// __dirname  =&gt;  /Users/lgq/Desktop/node
" data-status="copy"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> path </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">let</span><span class="token plain"> str </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&quot;/root/a/b/index.html&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">path</span><span class="token punctuation">.</span><span class="token method function property-access">dirname</span><span class="token punctuation">(</span><span class="token plain">str</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// 路径</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// /root/a/b</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">path</span><span class="token punctuation">.</span><span class="token method function property-access">extname</span><span class="token punctuation">(</span><span class="token plain">str</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// 后缀名</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// .html</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">path</span><span class="token punctuation">.</span><span class="token method function property-access">basename</span><span class="token punctuation">(</span><span class="token plain">str</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// 文件名</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// index.html</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// path.resolve() 路径解析，简单来说就是拼凑路径，最终返回一个绝对路径</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">let</span><span class="token plain"> pathOne </span><span class="token operator">=</span><span class="token plain"> path</span><span class="token punctuation">.</span><span class="token method function property-access">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;rooot/a/b&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;../c&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;d&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;..&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;e&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 一般用来打印绝对路径，就像下面这样，其中 __dirname 指的就是当前目录</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">let</span><span class="token plain"> pathTwo </span><span class="token operator">=</span><span class="token plain"> path</span><span class="token punctuation">.</span><span class="token method function property-access">resolve</span><span class="token punctuation">(</span><span class="token plain">__dirname</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;build&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// 这个用法很常见，你应该在 webpack 中有见过</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">pathOne</span><span class="token punctuation">,</span><span class="token plain"> pathTwo</span><span class="token punctuation">,</span><span class="token plain"> __dirname</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// pathOne  =&gt;  /Users/lgq/Desktop/node/rooot/a/c/e</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// pathTwo  =&gt;  /Users/lgq/Desktop/node/build</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// __dirname  =&gt;  /Users/lgq/Desktop/node</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="url-网址模块"><a aria-hidden="true" href="#url-网址模块"><span class="icon icon-link"></span></a>url 网址模块</h4><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="const url = require(&quot;url&quot;);

let site = &quot;http://www.xr.com/a/b/index.html?a=1&amp;b=2&quot;;
let { pathname, query } = url.parse(site, true); // url.parse() 解析网址，true 的意思是把参数解析成对象

console.log(pathname, query);
// /a/b/index.html  { a: &#x27;1&#x27;, b: &#x27;2&#x27; }
" data-status="copy"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> url </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;url&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">let</span><span class="token plain"> site </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&quot;http://www.xr.com/a/b/index.html?a=1&amp;b=2&quot;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">let</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> pathname</span><span class="token punctuation">,</span><span class="token plain"> query </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> url</span><span class="token punctuation">.</span><span class="token method function property-access">parse</span><span class="token punctuation">(</span><span class="token plain">site</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// url.parse() 解析网址，true 的意思是把参数解析成对象</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">pathname</span><span class="token punctuation">,</span><span class="token plain"> query</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// /a/b/index.html  { a: &#x27;1&#x27;, b: &#x27;2&#x27; }</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="http-服务模块"><a aria-hidden="true" href="#http-服务模块"><span class="icon icon-link"></span></a>http 服务模块</h4><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="const http = require(&quot;http&quot;);

// 创建http server，并传入回调函数:
const server = http.createServer(function(request, response) {
  // 回调函数接收request和response对象,
  // 获得HTTP请求的method和url:
  console.log(request.method + &quot;: &quot; + request.url);
  // 将HTTP响应200写入response, 同时设置Content-Type: text/html:
  response.writeHead(200, { &quot;Content-Type&quot;: &quot;text/html&quot; });
  // 将HTTP响应的HTML内容写入response:
  response.end(&quot;&lt;h1&gt;Hello world!&lt;/h1&gt;&quot;);
});

// 让服务器监听8080端口:
server.listen(8080);

console.log(&quot;Server is running at http://127.0.0.1:8080/&quot;);
" data-status="copy"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> http </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 创建http server，并传入回调函数:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> server </span><span class="token operator">=</span><span class="token plain"> http</span><span class="token punctuation">.</span><span class="token method function property-access">createServer</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">request</span><span class="token parameter punctuation">,</span><span class="token parameter"> response</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// 回调函数接收request和response对象,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// 获得HTTP请求的method和url:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">request</span><span class="token punctuation">.</span><span class="token property-access">method</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string">&quot;: &quot;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> request</span><span class="token punctuation">.</span><span class="token property-access">url</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// 将HTTP响应200写入response, 同时设置Content-Type: text/html:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  response</span><span class="token punctuation">.</span><span class="token method function property-access">writeHead</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&quot;text/html&quot;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// 将HTTP响应的HTML内容写入response:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  response</span><span class="token punctuation">.</span><span class="token method function property-access">end</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;h1&gt;Hello world!&lt;/h1&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 让服务器监听8080端口:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">server</span><span class="token punctuation">.</span><span class="token method function property-access">listen</span><span class="token punctuation">(</span><span class="token number">8080</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&quot;Server is running at http://127.0.0.1:8080/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="stream-流模块"><a aria-hidden="true" href="#stream-流模块"><span class="icon icon-link"></span></a>stream 流模块</h4><p>流是一种抽象的数据结构，比如从文件读取数据时，可以打开一个文件流，然后从文件流中不断地读取数据。有些流用来写入数据，比如向文件写入数据时，只需要把数据不断地往文件流中写进去就可以了。</p><p>在 <code>Node.js</code> 中，流也是一个对象，我们只需要响应流的事件就可以了：<code>data</code> 事件表示流的数据已经可以读取了，<code>end</code> 事件表示这个流已经到末尾了，没有数据可以读取了，<code>error</code> 事件表示出错了。</p><p>流的类型</p><ul><li>内置：许多核心模块都实现了流接口，如 fs.createReadStream</li><li>HTTP：处理网络技术的流</li><li><ul><li>解释器：第三方模块 XML、JSON 解释器</li></ul></li><li>浏览器：Node 流可以被拓展使用在浏览器</li><li>Audio：流接口的声音模块</li><li>RPC（远程调用）：通过网络发送流是进程间通信的有效方式</li><li>测试：使用流的测试库</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="const fs = require(&quot;fs&quot;);

// 读取流：fs.createReadStream();
// 写入流：fs.createWriteStream();
let rs = fs.createReadStream(&quot;file.txt&quot;); // 要读取的文件
let ws = fs.createWriteStream(&quot;output.txt&quot;); // 输出的文件

rs.pipe(ws); // 用 pipe 将 rs 和 ws 衔接起来，将读取流的数据传到输出流（就是这么简单的一句话就能搞定）

rs.on(&quot;error&quot;, (err) =&gt; {
  console.log(err);
});
ws.on(&quot;finish&quot;, () =&gt; {
  console.log(&quot;成功&quot;);
});
" data-status="copy"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> fs </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 读取流：fs.createReadStream();</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 写入流：fs.createWriteStream();</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">let</span><span class="token plain"> rs </span><span class="token operator">=</span><span class="token plain"> fs</span><span class="token punctuation">.</span><span class="token method function property-access">createReadStream</span><span class="token punctuation">(</span><span class="token string">&quot;file.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// 要读取的文件</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">let</span><span class="token plain"> ws </span><span class="token operator">=</span><span class="token plain"> fs</span><span class="token punctuation">.</span><span class="token method function property-access">createWriteStream</span><span class="token punctuation">(</span><span class="token string">&quot;output.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// 输出的文件</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">rs</span><span class="token punctuation">.</span><span class="token method function property-access">pipe</span><span class="token punctuation">(</span><span class="token plain">ws</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// 用 pipe 将 rs 和 ws 衔接起来，将读取流的数据传到输出流（就是这么简单的一句话就能搞定）</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">rs</span><span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">err</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">ws</span><span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token string">&quot;finish&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&quot;成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="crypto-加解密模块"><a aria-hidden="true" href="#crypto-加解密模块"><span class="icon icon-link"></span></a>crypto 加解密模块</h4><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="const crypto = require(&quot;crypto&quot;);

function aesEncrypt(data, key = &quot;key&quot;) {
  const cipher = crypto.createCipher(&quot;aes192&quot;, key);
  let crypted = cipher.update(data, &quot;utf8&quot;, &quot;hex&quot;);
  crypted += cipher.final(&quot;hex&quot;);
  return crypted;
}

function aesDecrypt(encrypted, key = &quot;key&quot;) {
  const decipher = crypto.createDecipher(&quot;aes192&quot;, key);
  let decrypted = decipher.update(encrypted, &quot;hex&quot;, &quot;utf8&quot;);
  decrypted += decipher.final(&quot;utf8&quot;);
  return decrypted;
}
" data-status="copy"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> crypto </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;crypto&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">aesEncrypt</span><span class="token punctuation">(</span><span class="token plain">data</span><span class="token punctuation">,</span><span class="token plain"> key </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> cipher </span><span class="token operator">=</span><span class="token plain"> crypto</span><span class="token punctuation">.</span><span class="token method function property-access">createCipher</span><span class="token punctuation">(</span><span class="token string">&quot;aes192&quot;</span><span class="token punctuation">,</span><span class="token plain"> key</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> crypted </span><span class="token operator">=</span><span class="token plain"> cipher</span><span class="token punctuation">.</span><span class="token method function property-access">update</span><span class="token punctuation">(</span><span class="token plain">data</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;utf8&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;hex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  crypted </span><span class="token operator">+=</span><span class="token plain"> cipher</span><span class="token punctuation">.</span><span class="token method function property-access">final</span><span class="token punctuation">(</span><span class="token string">&quot;hex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> crypted</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">aesDecrypt</span><span class="token punctuation">(</span><span class="token plain">encrypted</span><span class="token punctuation">,</span><span class="token plain"> key </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&quot;key&quot;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> decipher </span><span class="token operator">=</span><span class="token plain"> crypto</span><span class="token punctuation">.</span><span class="token method function property-access">createDecipher</span><span class="token punctuation">(</span><span class="token string">&quot;aes192&quot;</span><span class="token punctuation">,</span><span class="token plain"> key</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> decrypted </span><span class="token operator">=</span><span class="token plain"> decipher</span><span class="token punctuation">.</span><span class="token method function property-access">update</span><span class="token punctuation">(</span><span class="token plain">encrypted</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;hex&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&quot;utf8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  decrypted </span><span class="token operator">+=</span><span class="token plain"> decipher</span><span class="token punctuation">.</span><span class="token method function property-access">final</span><span class="token punctuation">(</span><span class="token string">&quot;utf8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">return</span><span class="token plain"> decrypted</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="child_process-子进程"><a aria-hidden="true" href="#child_process-子进程"><span class="icon icon-link"></span></a>child_process 子进程</h4><ul><li><code>Node</code><ul><li>fork：想将一个 <code>Node</code> 进程作为一个独立的进程来运行的时候使用，是的计算处理和文件描述器脱离 <code>Node</code> 主进程</li></ul></li><li>非 <code>Node</code><ul><li>spawn：处理一些会有很多子进程 <code>I/O</code> 时、进程会有大量输出时使用</li><li>execFile：只需执行一个外部程序的时候使用，执行速度快，处理用户输入相对安全</li><li>exec：想直接访问线程的 <code>shell</code> 命令时使用，一定要注意用户输入</li></ul></li><li>3个同步方法：execSync、execFileSync、spawnSync</li></ul><h2 id="异步编程"><a aria-hidden="true" href="#异步编程"><span class="icon icon-link"></span></a>异步编程</h2></div><div class="__dumi-default-layout-footer-meta"><span data-updated-text="Last Update: ">11/27/2020, 9:47:03 AM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/umi.js"></script>
  </body>
</html>
