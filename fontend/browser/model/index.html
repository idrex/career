<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="/logo.svg" />
    <link rel="stylesheet" href="/umi.css" />
    <script>
      window.routerBase = "/";
    </script>
    <script>
      //! umi version: 3.2.25
    </script>
    <title>浏览器模型</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/logo.svg&#x27;)" href="/">Drex</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="/guide">指南</a><a aria-current="page" class="active" href="/fontend">前端</a><a href="/backend">后端</a><a href="/devops">运维</a><a href="/blog">博客</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/idrex/career">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/logo.svg&#x27;)" href="/"></a><h1>Drex</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/guide">指南</a></li><li><a aria-current="page" class="active" href="/fontend">前端</a></li><li><a href="/backend">后端</a></li><li><a href="/devops">运维</a></li><li><a href="/blog">博客</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/idrex/career">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a href="/fontend">前端体系图</a></li><li><a aria-current="page" class="active" href="/fontend/browser">浏览器</a><ul><li><a href="/fontend/browser/basic"><span>基础知识</span></a></li><li><a aria-current="page" class="active" href="/fontend/browser/model"><span>浏览器模型</span></a></li><li><a href="/fontend/browser/optimization"><span>性能优化</span></a></li><li><a href="/fontend/browser/request"><span>网络请求</span></a></li></ul></li><li><a href="/fontend/html">Html</a><ul><li><a href="/fontend/html/basic"><span>基础知识</span></a></li></ul></li><li><a href="/fontend/css">CSS</a><ul><li><a href="/fontend/css/basic"><span>基础知识</span></a></li><li><a href="/fontend/css/less"><span>Less</span></a></li></ul></li><li><a href="/fontend/javasrcipt">Javasrcipt</a><ul><li><a href="/fontend/javasrcipt/basic"><span>基础中的基础</span></a></li><li><a href="/fontend/javasrcipt/application"><span>基础应用</span></a></li><li><a href="/fontend/javasrcipt/esnext"><span>ES6 &amp; ES Next</span></a></li><li><a href="/fontend/javasrcipt/ts"><span>TypeScript</span></a></li><li><a href="/fontend/javasrcipt/issues"><span>JS 相关方法实现</span></a></li><li><a href="/fontend/javasrcipt/optimization"><span>代码优化技巧</span></a></li></ul></li><li><a href="/fontend/construct">构建工具</a><ul><li><a href="/fontend/construct/webpack"><span>Webpack</span></a></li></ul></li><li><a href="/fontend/frame">JS 框架</a><ul><li><a href="/fontend/frame/react"><span>React</span></a></li><li><a href="/fontend/frame/redux"><span>Redux</span></a></li><li><a href="/fontend/frame/vue"><span>Vue</span></a></li></ul></li><li><a href="/fontend/mobile">移动&amp;桌面应用</a><ul><li><a href="/fontend/mobile/certificate"><span>证书说明</span></a></li><li><a href="/fontend/mobile/hybrid"><span>Hybrid APP</span></a></li><li><a href="/fontend/mobile/react-native"><span>React Native</span></a></li></ul></li><li><a href="/fontend/setup">工程体系</a><ul><li><a href="/fontend/setup/pattern"><span>体系格局</span></a></li><li><a href="/fontend/setup/engineering"><span>前端工程化</span></a></li></ul></li><li><a href="/fontend/package">Package</a><ul><li><a href="/fontend/package/module"><span>模块化标准</span></a></li><li><a href="/fontend/package/npm"><span>Npm</span></a></li><li><a href="/fontend/package/yarn"><span>Yarn</span></a></li></ul></li><li><a href="/fontend/security">Security</a><ul><li><a href="/fontend/security/monitor"><span>监控体系</span></a></li><li><a href="/fontend/security/web"><span>Web 安全</span></a></li></ul></li><li><a href="/fontend/visual">Visual</a><ul><li><a href="/fontend/visual/map"><span>Map 地图组建</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="window 属性" data-depth="2" class=""><a href="/fontend/browser/model#window-属性"><span>window 属性</span></a></li><li title="location 对象" data-depth="3" class=""><a href="/fontend/browser/model#location-对象"><span>location 对象</span></a></li><li title="history 对象" data-depth="3" class=""><a href="/fontend/browser/model#history-对象"><span>history 对象</span></a></li><li title="Navigator 对象" data-depth="3" class=""><a href="/fontend/browser/model#navigator-对象"><span>Navigator 对象</span></a></li><li title="Performance 性能" data-depth="3" class=""><a href="/fontend/browser/model#performance-性能"><span>Performance 性能</span></a></li><li title="window 方法" data-depth="2" class=""><a href="/fontend/browser/model#window-方法"><span>window 方法</span></a></li><li title="绘制方法" data-depth="3" class=""><a href="/fontend/browser/model#绘制方法"><span>绘制方法</span></a></li><li title="CORS 跨域资源共享" data-depth="2" class=""><a href="/fontend/browser/model#cors-跨域资源共享"><span>CORS 跨域资源共享</span></a></li><li title="Web API" data-depth="2" class=""><a href="/fontend/browser/model#web-api"><span>Web API</span></a></li><li title="Web Worker" data-depth="3" class=""><a href="/fontend/browser/model#web-worker"><span>Web Worker</span></a></li><li title="Service Worker" data-depth="3" class=""><a href="/fontend/browser/model#service-worker"><span>Service Worker</span></a></li><li title="Fullscreen API" data-depth="3" class=""><a href="/fontend/browser/model#fullscreen-api"><span>Fullscreen API</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="浏览器模型"><a aria-hidden="true" href="#浏览器模型"><span class="icon icon-link"></span></a>浏览器模型</h1><h2 id="window-属性"><a aria-hidden="true" href="#window-属性"><span class="icon icon-link"></span></a>window 属性</h2><h3 id="location-对象"><a aria-hidden="true" href="#location-对象"><span class="icon icon-link"></span></a>location 对象</h3><p>location.href-- 返回或设置当前文档的 URL location.search -- 返回 URL 中的查询字符串部分。例如 <a href="https://www.drex.wang/drex?id=5&amp;name=drex" target="_blank" rel="noopener noreferrer">https://www.drex.wang/drex?id=5&amp;name=drex<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回包括(?)后面的内容?id=5&amp;name=drex location.hash -- 返回 URL#后面的内容，如果没有#，返回空 location.host -- 返回 URL 中的域名部分，例如 www.drex.wang location.hostname -- 返回 URL 中的主域名部分，例如 drex.wang location.pathname -- 返回 URL 的域名后的部分。例如 <a href="https://drex.wang/xhtml/" target="_blank" rel="noopener noreferrer">https://drex.wang/xhtml/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回/xhtml/ location.port -- 返回 URL 中的端口部分。例如 <a href="https://drex.wang:8080/xhtml/" target="_blank" rel="noopener noreferrer">https://drex.wang:8080/xhtml/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回 8080 location.protocol -- 返回 URL 中的协议部分。例如 <a href="https://drex.wang:8080/xhtml/" target="_blank" rel="noopener noreferrer">https://drex.wang:8080/xhtml/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 返回(//)前面的内容 http: location.assign -- 设置当前文档的 URL location.replace() -- 设置当前文档的 URL，并且在 history 对象的地址列表中移除这个 URL location.replace(url); location.reload() -- 重载当前页面</p><h3 id="history-对象"><a aria-hidden="true" href="#history-对象"><span class="icon icon-link"></span></a>history 对象</h3><ul><li>history.go() -- 前进或后退指定的页面数 history.go(num);</li><li>history.back() -- 后退一页</li><li>history.forward() -- 前进一页</li></ul><h3 id="navigator-对象"><a aria-hidden="true" href="#navigator-对象"><span class="icon icon-link"></span></a>Navigator 对象</h3><ul><li>navigator.userAgent -- 返回用户代理头的字符串表示(就是包括浏览器版本信息等的字符串)</li><li>navigator.cookieEnabled -- 返回浏览器是否支持(启用)cookie</li></ul><h3 id="performance-性能"><a aria-hidden="true" href="#performance-性能"><span class="icon icon-link"></span></a>Performance 性能</h3><ul><li>performance.getEntries()</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// 获取 performance 数据
var performance = {
  // memory 是非标准属性，只在 Chrome 有
  memory: {
    usedJSHeapSize: 16100000, // JS 对象（包括V8引擎内部对象）占用的内存，一定小于 totalJSHeapSize
    totalJSHeapSize: 35100000, // 可使用的内存
    jsHeapSizeLimit: 793000000, // 内存大小限制
  },

  //  页面来源
  navigation: {
    redirectCount: 0, // 如果有重定向的话，页面通过几次重定向跳转而来
    type: 0,          // 0   即 TYPE_NAVIGATENEXT 正常进入的页面（非刷新、非重定向等）
                      // 1   即 TYPE_RELOAD       通过 window.location.reload() 刷新的页面
                      // 2   即 TYPE_BACK_FORWARD 通过浏览器的前进后退按钮进入的页面（历史记录）
                      // 255 即 TYPE_UNDEFINED    非以上方式进入的页面
  },

  timing: {
    // 在同一个浏览器上下文中，前一个网页（与当前页面不一定同域）unload 的时间戳，如果无前一个网页 unload ，则与 fetchStart 值相等
    navigationStart: 1591112691935,

    // 前一个网页（与当前页面同域）unload 的时间戳，如果无前一个网页 unload 或者前一个网页与当前页面不同域，则值为 0
    unloadEventStart: 0,

    // 和 unloadEventStart 相对应，返回前一个网页 unload 事件绑定的回调函数执行完毕的时间戳
    unloadEventEnd: 0,

    // 第一个 HTTP 重定向发生时的时间。有跳转且是同域名内的重定向才算，否则值为 0
    redirectStart: 0,

    // 最后一个 HTTP 重定向完成时的时间。有跳转且是同域名内部的重定向才算，否则值为 0
    redirectEnd: 0,

    // 浏览器准备好使用 HTTP 请求抓取文档的时间，这发生在检查本地缓存之前
    fetchStart: 1591112692155,

    // DNS 域名查询开始的时间，如果使用了本地缓存（即无 DNS 查询）或持久连接，则与 fetchStart 值相等
    domainLookupStart: 1591112692155,

    // DNS 域名查询完成的时间，如果使用了本地缓存（即无 DNS 查询）或持久连接，则与 fetchStart 值相等
    domainLookupEnd: 1591112692155,

    // HTTP（TCP） 开始建立连接的时间，如果是持久连接，则与 fetchStart 值相等
    // 注意如果在传输层发生了错误且重新建立连接，则这里显示的是新建立的连接开始的时间
    connectStart: 1591112692155,

    // HTTP（TCP） 完成建立连接的时间（完成握手），如果是持久连接，则与 fetchStart 值相等
    // 注意如果在传输层发生了错误且重新建立连接，则这里显示的是新建立的连接完成的时间
    // 注意这里握手结束，包括安全连接建立完成、SOCKS 授权通过
    connectEnd: 1591112692155,

    // HTTPS 连接开始的时间，如果不是安全连接，则值为 0
    secureConnectionStart: 0,

    // HTTP 请求读取真实文档开始的时间（完成建立连接），包括从本地读取缓存
    // 连接错误重连时，这里显示的也是新建立连接的时间
    requestStart: 1591112692158,

    // HTTP 开始接收响应的时间（获取到第一个字节），包括从本地读取缓存
    responseStart: 1591112692686,

    // HTTP 响应全部接收完成的时间（获取到最后一个字节），包括从本地读取缓存
    responseEnd: 1591112692687,

    // 开始解析渲染 DOM 树的时间，此时 Document.readyState 变为 loading，并将抛出 readystatechange 相关事件
    domLoading: 1591112692690,

    // 完成解析 DOM 树的时间，Document.readyState 变为 interactive，并将抛出 readystatechange 相关事件
    // 注意只是 DOM 树解析完成，这时候并没有开始加载网页内的资源
    domInteractive: 1591112693093,

    // DOM 解析完成后，网页内资源加载开始的时间
    // 在 DOMContentLoaded 事件抛出前发生
    domContentLoadedEventStart: 1591112693093,

    // DOM 解析完成后，网页内资源加载完成的时间（如 JS 脚本加载执行完毕）
    domContentLoadedEventEnd: 1591112693101,

    // DOM 树解析完成，且资源也准备就绪的时间，Document.readyState 变为 complete，并将抛出 readystatechange 相关事件
    domComplete: 1591112693214,

    // load 事件发送给文档，也即 load 回调函数开始执行的时间
    // 注意如果没有绑定 load 事件，值为 0
    loadEventStart: 1591112693214,

    // load 事件的回调函数执行完毕的时间
    loadEventEnd: 1591112693215,
  },
};
" data-status="copy"></button><div class="token-line"><span class="token comment">// 获取 performance 数据</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">var</span><span class="token plain"> </span><span class="token dom variable">performance</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// memory 是非标准属性，只在 Chrome 有</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  memory</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    usedJSHeapSize</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">16100000</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// JS 对象（包括V8引擎内部对象）占用的内存，一定小于 totalJSHeapSize</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    totalJSHeapSize</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">35100000</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// 可使用的内存</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    jsHeapSizeLimit</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">793000000</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// 内存大小限制</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">//  页面来源</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  navigation</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    redirectCount</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// 如果有重定向的话，页面通过几次重定向跳转而来</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    type</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">,</span><span class="token plain">          </span><span class="token comment">// 0   即 TYPE_NAVIGATENEXT 正常进入的页面（非刷新、非重定向等）</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">                      </span><span class="token comment">// 1   即 TYPE_RELOAD       通过 window.location.reload() 刷新的页面</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">                      </span><span class="token comment">// 2   即 TYPE_BACK_FORWARD 通过浏览器的前进后退按钮进入的页面（历史记录）</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">                      </span><span class="token comment">// 255 即 TYPE_UNDEFINED    非以上方式进入的页面</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">  timing</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 在同一个浏览器上下文中，前一个网页（与当前页面不一定同域）unload 的时间戳，如果无前一个网页 unload ，则与 fetchStart 值相等</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    navigationStart</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1591112691935</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 前一个网页（与当前页面同域）unload 的时间戳，如果无前一个网页 unload 或者前一个网页与当前页面不同域，则值为 0</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    unloadEventStart</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 和 unloadEventStart 相对应，返回前一个网页 unload 事件绑定的回调函数执行完毕的时间戳</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    unloadEventEnd</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 第一个 HTTP 重定向发生时的时间。有跳转且是同域名内的重定向才算，否则值为 0</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    redirectStart</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 最后一个 HTTP 重定向完成时的时间。有跳转且是同域名内部的重定向才算，否则值为 0</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    redirectEnd</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 浏览器准备好使用 HTTP 请求抓取文档的时间，这发生在检查本地缓存之前</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    fetchStart</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1591112692155</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// DNS 域名查询开始的时间，如果使用了本地缓存（即无 DNS 查询）或持久连接，则与 fetchStart 值相等</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    domainLookupStart</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1591112692155</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// DNS 域名查询完成的时间，如果使用了本地缓存（即无 DNS 查询）或持久连接，则与 fetchStart 值相等</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    domainLookupEnd</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1591112692155</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// HTTP（TCP） 开始建立连接的时间，如果是持久连接，则与 fetchStart 值相等</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 注意如果在传输层发生了错误且重新建立连接，则这里显示的是新建立的连接开始的时间</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    connectStart</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1591112692155</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// HTTP（TCP） 完成建立连接的时间（完成握手），如果是持久连接，则与 fetchStart 值相等</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 注意如果在传输层发生了错误且重新建立连接，则这里显示的是新建立的连接完成的时间</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 注意这里握手结束，包括安全连接建立完成、SOCKS 授权通过</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    connectEnd</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1591112692155</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// HTTPS 连接开始的时间，如果不是安全连接，则值为 0</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    secureConnectionStart</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// HTTP 请求读取真实文档开始的时间（完成建立连接），包括从本地读取缓存</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 连接错误重连时，这里显示的也是新建立连接的时间</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    requestStart</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1591112692158</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// HTTP 开始接收响应的时间（获取到第一个字节），包括从本地读取缓存</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    responseStart</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1591112692686</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// HTTP 响应全部接收完成的时间（获取到最后一个字节），包括从本地读取缓存</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    responseEnd</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1591112692687</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 开始解析渲染 DOM 树的时间，此时 Document.readyState 变为 loading，并将抛出 readystatechange 相关事件</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    domLoading</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1591112692690</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 完成解析 DOM 树的时间，Document.readyState 变为 interactive，并将抛出 readystatechange 相关事件</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 注意只是 DOM 树解析完成，这时候并没有开始加载网页内的资源</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    domInteractive</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1591112693093</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// DOM 解析完成后，网页内资源加载开始的时间</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 在 DOMContentLoaded 事件抛出前发生</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    domContentLoadedEventStart</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1591112693093</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// DOM 解析完成后，网页内资源加载完成的时间（如 JS 脚本加载执行完毕）</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    domContentLoadedEventEnd</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1591112693101</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// DOM 树解析完成，且资源也准备就绪的时间，Document.readyState 变为 complete，并将抛出 readystatechange 相关事件</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    domComplete</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1591112693214</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// load 事件发送给文档，也即 load 回调函数开始执行的时间</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// 注意如果没有绑定 load 事件，值为 0</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    loadEventStart</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1591112693214</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// load 事件的回调函数执行完毕的时间</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    loadEventEnd</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">1591112693215</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="window-方法"><a aria-hidden="true" href="#window-方法"><span class="icon icon-link"></span></a>window 方法</h2><h3 id="绘制方法"><a aria-hidden="true" href="#绘制方法"><span class="icon icon-link"></span></a>绘制方法</h3><ul><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestIdleCallback" target="_blank" rel="noopener noreferrer">window.requestIdleCallback(callback[, options])<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: 在浏览器的空闲时段内调用的函数排队，这使开发者能够在主事件循环上执行后台和低优先级工作，而不会影响延迟关键事件，如动画和输入响应。函数一般会按先进先调用的顺序执行，然而，如果回调函数指定了执行超时时间 <code>timeout</code>，则有可能为了在超时前执行函数而打乱执行顺序。</p></li><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/cancelIdleCallback" target="_blank" rel="noopener noreferrer">window.cancelIdleCallback(handle)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: 方法用于取消之前调用 <code>window.requestIdleCallback()</code> 的回调</p></li><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestAnimationFrame" target="_blank" rel="noopener noreferrer">window.requestAnimationFrame(callback)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: 告诉浏览器——你希望执行一个动画，并且要求浏览器在下次重绘之前调用指定的回调函数更新动画。该方法需要传入一个回调函数作为参数，该回调函数会在浏览器下一次重绘之前执行</p></li><li><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/cancelAnimationFrame" target="_blank" rel="noopener noreferrer">window.mozCancelAnimationFrame(requestID)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: 取消一个先前通过调用 <code>window.requestAnimationFrame()</code> 方法添加到计划中的动画帧请求.</p></li></ul><h2 id="cors-跨域资源共享"><a aria-hidden="true" href="#cors-跨域资源共享"><span class="icon icon-link"></span></a>CORS 跨域资源共享</h2><h2 id="web-api"><a aria-hidden="true" href="#web-api"><span class="icon icon-link"></span></a>Web API</h2><h3 id="web-worker"><a aria-hidden="true" href="#web-worker"><span class="icon icon-link"></span></a>Web Worker</h3><p>Web Worker 作为浏览器多线程技术, 在页面内容不断丰富, 功能日趋复杂的当下, 成为缓解页面卡顿, 提升应用性能的可选方案. HTML5 中的 Web Worker 可以分为两种不同线程类型，一个是专用线程 Dedicated Worker，一个是共享线程 Shared Worker。两种类型的线程各有不同的用途。下面对这两种工作线程作了详细的说明和描述。</p><h4 id="专用线程：dedicated-worker"><a aria-hidden="true" href="#专用线程：dedicated-worker"><span class="icon icon-link"></span></a>专用线程：Dedicated Worker</h4><p><strong>主线程</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// 创建专用线程示例代码
var worker = new Worker(&#x27;dedicated.js&#x27;);
// 接收来至工作线程示例代码
worker.onmessage = function (event) { ... };
// 高效的发送 ArrayBuffer 数据代码
worker.postMessage({ 
 operation: &#x27;list_all_users&#x27;, 
 //ArrayBuffer object 
 input: buffer, 
 threshold: 0.8, 
}, [buffer]);
// 关闭
worker.terminate();
" data-status="copy"></button><div class="token-line"><span class="token comment">// 创建专用线程示例代码</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">var</span><span class="token plain"> worker </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">&#x27;dedicated.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 接收来至工作线程示例代码</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">worker</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onmessage</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token spread operator">...</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 高效的发送 ArrayBuffer 数据代码</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">worker</span><span class="token punctuation">.</span><span class="token method function property-access">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"> operation</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;list_all_users&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"> </span><span class="token comment">//ArrayBuffer object </span><span class="token plain"></span></div><div class="token-line"><span class="token plain"> input</span><span class="token punctuation">:</span><span class="token plain"> buffer</span><span class="token punctuation">,</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"> threshold</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">0.8</span><span class="token punctuation">,</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">buffer</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 关闭</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">worker</span><span class="token punctuation">.</span><span class="token method function property-access">terminate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><p><strong>子线程</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// 写法一
self.addEventListener(&#x27;message&#x27;, function (e) {
  self.postMessage(&#x27;You said: &#x27; + e.data);
}, false);
// 写法二
this.addEventListener(&#x27;message&#x27;, function (e) {
  this.postMessage(&#x27;You said: &#x27; + e.data);
}, false);
// 写法三
addEventListener(&#x27;message&#x27;, function (e) {
  postMessage(&#x27;You said: &#x27; + e.data);
}, false);

// 加载脚本
importScripts(&#x27;script1.js&#x27;);

// 关闭
self.close();
" data-status="copy"></button><div class="token-line"><span class="token comment">// 写法一</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">self</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;message&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  self</span><span class="token punctuation">.</span><span class="token method function property-access">postMessage</span><span class="token punctuation">(</span><span class="token string">&#x27;You said: &#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> e</span><span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 写法二</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;message&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">postMessage</span><span class="token punctuation">(</span><span class="token string">&#x27;You said: &#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> e</span><span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 写法三</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;message&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">&#x27;You said: &#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> e</span><span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 加载脚本</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">importScripts</span><span class="token punctuation">(</span><span class="token string">&#x27;script1.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 关闭</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">self</span><span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h4 id="共享线程-shared-worker"><a aria-hidden="true" href="#共享线程-shared-worker"><span class="icon icon-link"></span></a>共享线程 Shared Worker</h4><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="// 创建共享线程的代码示例如下
var worker = new SharedWorker(&#x27;sharedworker.js&#x27;, ’ mysharedworker ’ );
// 从端口接收数据 , 包括文本数据以及结构化数据
worker.port.onmessage = function (event) { define your logic here... }; 
// 向端口发送普通文本数据
worker.port.postMessage(&#x27;put your message here … &#x27;); 
// 向端口发送结构化数据
worker.port.postMessage({ username: &#x27;usertext&#x27;; live_city: 
[&#x27;data-one&#x27;, &#x27;data-two&#x27;, &#x27;data-three&#x27;,&#x27;data-four&#x27;]});
" data-status="copy"></button><div class="token-line"><span class="token comment">// 创建共享线程的代码示例如下</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">var</span><span class="token plain"> worker </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">SharedWorker</span><span class="token punctuation">(</span><span class="token string">&#x27;sharedworker.js&#x27;</span><span class="token punctuation">,</span><span class="token plain"> ’ mysharedworker ’ </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 从端口接收数据 , 包括文本数据以及结构化数据</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">worker</span><span class="token punctuation">.</span><span class="token property-access">port</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onmessage</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> define your logic here</span><span class="token spread operator">...</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 向端口发送普通文本数据</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">worker</span><span class="token punctuation">.</span><span class="token property-access">port</span><span class="token punctuation">.</span><span class="token method function property-access">postMessage</span><span class="token punctuation">(</span><span class="token string">&#x27;put your message here … &#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// 向端口发送结构化数据</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">worker</span><span class="token punctuation">.</span><span class="token property-access">port</span><span class="token punctuation">.</span><span class="token method function property-access">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> username</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;usertext&#x27;</span><span class="token punctuation">;</span><span class="token plain"> live_city</span><span class="token punctuation">:</span><span class="token plain"> </span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">[</span><span class="token string">&#x27;data-one&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;data-two&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;data-three&#x27;</span><span class="token punctuation">,</span><span class="token string">&#x27;data-four&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="service-worker"><a aria-hidden="true" href="#service-worker"><span class="icon icon-link"></span></a>Service Worker</h3><p>Service Worker 首先是一个运行在后台的 Worker 线程，然后它会长期运行，充当一个服务，很适合那些不需要网页或用户互动的功能。它的最常见用途就是拦截和处理网络请求。</p><p>Service Worker 是一个后台运行的脚本，充当一个代理服务器，拦截用户发出的网络请求，比如加载脚本和图片。Service Worker 可以修改用户的请求，或者直接向用户发出回应，不用联系服务器，这使得用户可以在离线情况下使用网络应用。它还可以在本地缓存资源文件，直接从缓存加载文件，因此可以加快访问速度。</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="if (&#x27;serviceWorker&#x27; in navigator) {
  window.addEventListener(&#x27;load&#x27;, function() {
    navigator.serviceWorker.register(&#x27;/service-worker.js&#x27;);
  });
}
" data-status="copy"></button><div class="token-line"><span class="token keyword">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token string">&#x27;serviceWorker&#x27;</span><span class="token plain"> </span><span class="token keyword">in</span><span class="token plain"> </span><span class="token dom variable">navigator</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;load&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token dom variable">navigator</span><span class="token punctuation">.</span><span class="token property-access">serviceWorker</span><span class="token punctuation">.</span><span class="token method function property-access">register</span><span class="token punctuation">(</span><span class="token string">&#x27;/service-worker.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h3 id="fullscreen-api"><a aria-hidden="true" href="#fullscreen-api"><span class="icon icon-link"></span></a>Fullscreen API</h3><p><code>Fullscreen API</code> 让我们能够在 <code>Web app</code> 中启用全屏模式。它使你可以选择要在全屏模式下查看的元素。在 <code>Android</code> 手机中，它将删除浏览器窗口和 <code>Android</code> 顶部状态栏（显示网络状态，电池状态等的地方）。</p><p><a href="http://www.ruanyifeng.com/blog/2016/04/cors.html" target="_blank" rel="noopener noreferrer">跨域资源共享 CORS 详解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/API" target="_blank" rel="noopener noreferrer">Web API 接口参考<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><a href="http://www.ruanyifeng.com/blog/2018/07/web-worker.html" target="_blank" rel="noopener noreferrer">Web Worker 使用教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><a href="https://mp.weixin.qq.com/s/MyRRIbn-UoruVD1dpvD-QQ" target="_blank" rel="noopener noreferrer">Web Worker 文献综述<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><a href="https://juejin.im/post/5ee8c60ef265da76ed486e20?utm_source=gold_browser_extension#heading-1" target="_blank" rel="noopener noreferrer">参考网站<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div><div class="__dumi-default-layout-footer-meta"><span data-updated-text="Last Update: ">11/5/2020, 10:02:50 AM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/umi.js"></script>
  </body>
</html>
