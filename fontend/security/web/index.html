<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="/logo.svg" />
    <link rel="stylesheet" href="/umi.css" />
    <script>
      window.routerBase = "/";
    </script>
    <script>
      //! umi version: 3.2.25
    </script>
    <title>Web 安全</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;/logo.svg&#x27;)" href="/">Drex</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><a href="/guide">指南</a><a aria-current="page" class="active" href="/fontend">前端</a><a href="/backend">后端</a><a href="/devops">运维</a><a href="/blog">博客</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/idrex/career">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;/logo.svg&#x27;)" href="/"></a><h1>Drex</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/guide">指南</a></li><li><a aria-current="page" class="active" href="/fontend">前端</a></li><li><a href="/backend">后端</a></li><li><a href="/devops">运维</a></li><li><a href="/blog">博客</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/idrex/career">GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div><ul class="__dumi-default-menu-list"><li><a href="/fontend">前端体系图</a></li><li><a href="/fontend/browser">浏览器</a><ul><li><a href="/fontend/browser/basic"><span>基础知识</span></a></li><li><a href="/fontend/browser/model"><span>浏览器模型</span></a></li><li><a href="/fontend/browser/optimization"><span>性能优化</span></a></li><li><a href="/fontend/browser/request"><span>网络请求</span></a></li></ul></li><li><a href="/fontend/html">Html</a><ul><li><a href="/fontend/html/basic"><span>基础知识</span></a></li></ul></li><li><a href="/fontend/css">CSS</a><ul><li><a href="/fontend/css/basic"><span>基础知识</span></a></li><li><a href="/fontend/css/less"><span>Less</span></a></li></ul></li><li><a href="/fontend/javasrcipt">Javasrcipt</a><ul><li><a href="/fontend/javasrcipt/basic"><span>基础中的基础</span></a></li><li><a href="/fontend/javasrcipt/application"><span>基础应用</span></a></li><li><a href="/fontend/javasrcipt/esnext"><span>ES6 &amp; ES Next</span></a></li><li><a href="/fontend/javasrcipt/ts"><span>TypeScript</span></a></li><li><a href="/fontend/javasrcipt/issues"><span>JS 相关方法实现</span></a></li><li><a href="/fontend/javasrcipt/optimization"><span>代码优化技巧</span></a></li></ul></li><li><a href="/fontend/construct">构建工具</a><ul><li><a href="/fontend/construct/webpack"><span>Webpack</span></a></li></ul></li><li><a href="/fontend/frame">JS 框架</a><ul><li><a href="/fontend/frame/react"><span>React</span></a></li><li><a href="/fontend/frame/redux"><span>Redux</span></a></li><li><a href="/fontend/frame/vue"><span>Vue</span></a></li></ul></li><li><a href="/fontend/mobile">移动&amp;桌面应用</a><ul><li><a href="/fontend/mobile/certificate"><span>证书说明</span></a></li><li><a href="/fontend/mobile/hybrid"><span>Hybrid APP</span></a></li><li><a href="/fontend/mobile/react-native"><span>React Native</span></a></li></ul></li><li><a href="/fontend/setup">工程体系</a><ul><li><a href="/fontend/setup/pattern"><span>体系格局</span></a></li><li><a href="/fontend/setup/engineering"><span>前端工程化</span></a></li></ul></li><li><a href="/fontend/package">Package</a><ul><li><a href="/fontend/package/module"><span>模块化标准</span></a></li><li><a href="/fontend/package/npm"><span>Npm</span></a></li><li><a href="/fontend/package/yarn"><span>Yarn</span></a></li></ul></li><li><a aria-current="page" class="active" href="/fontend/security">Security</a><ul><li><a href="/fontend/security/monitor"><span>监控体系</span></a></li><li><a aria-current="page" class="active" href="/fontend/security/web"><span>Web 安全</span></a></li></ul></li><li><a href="/fontend/visual">Visual</a><ul><li><a href="/fontend/visual/map"><span>Map 地图组建</span></a></li></ul></li></ul></div></div><ul class="__dumi-default-layout-toc" role="slug-list"><li title="XSS" data-depth="2" class=""><a href="/fontend/security/web#xss"><span>XSS</span></a></li><li title="反射型 XSS" data-depth="3" class=""><a href="/fontend/security/web#反射型-xss"><span>反射型 XSS</span></a></li><li title="存储型 XSS：" data-depth="3" class=""><a href="/fontend/security/web#存储型-xss："><span>存储型 XSS：</span></a></li><li title="DOM 型 XSS" data-depth="3" class=""><a href="/fontend/security/web#dom-型-xss"><span>DOM 型 XSS</span></a></li><li title="防御" data-depth="3" class=""><a href="/fontend/security/web#防御"><span>防御</span></a></li><li title="CSRF" data-depth="2" class=""><a href="/fontend/security/web#csrf"><span>CSRF</span></a></li><li title="防御" data-depth="3" class=""><a href="/fontend/security/web#防御-1"><span>防御</span></a></li><li title="点击劫持" data-depth="2" class=""><a href="/fontend/security/web#点击劫持"><span>点击劫持</span></a></li><li title="特点" data-depth="3" class=""><a href="/fontend/security/web#特点"><span>特点</span></a></li><li title="防御" data-depth="3" class=""><a href="/fontend/security/web#防御-2"><span>防御</span></a></li><li title="URL跳转漏洞" data-depth="2" class=""><a href="/fontend/security/web#url跳转漏洞"><span>URL跳转漏洞</span></a></li><li title="原理" data-depth="3" class=""><a href="/fontend/security/web#原理"><span>原理</span></a></li><li title="防御" data-depth="3" class=""><a href="/fontend/security/web#防御-3"><span>防御</span></a></li><li title="SQL 注入" data-depth="2" class=""><a href="/fontend/security/web#sql-注入"><span>SQL 注入</span></a></li><li title="OS命令注入攻击" data-depth="2" class=""><a href="/fontend/security/web#os命令注入攻击"><span>OS命令注入攻击</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="web-安全"><a aria-hidden="true" href="#web-安全"><span class="icon icon-link"></span></a>Web 安全</h1><p><img src="/static/input.905a1b9c.jpg"/></p><p>安全的本质其实是数据流，搞懂《HTTP 权威指南》720 页，你就会明白安全术语的“输入输出”。 黑客通过输入提交“特殊数据”，特殊数据在数据流的每个层处理，如果某个层没处理好，在输出的时候，就会出现相应层的安全问题。</p><h2 id="xss"><a aria-hidden="true" href="#xss"><span class="icon icon-link"></span></a>XSS</h2><p>跨站脚本攻击，是说攻击者通过注入恶意的脚本，在用户浏览网页的时候进行攻击，比如获取 <code>cookie</code>，或者其他用户身份信息，可以分为存储型和反射型:</p><h3 id="反射型-xss"><a aria-hidden="true" href="#反射型-xss"><span class="icon icon-link"></span></a>反射型 XSS</h3><p>&lt;非持久化&gt; 攻击者事先制作好攻击链接, 需要欺骗用户自己去点击链接才能触发 <code>XSS</code> 代码（服务器中没有这样的页面和内容），一般容易出现在搜索页面。</p><h3 id="存储型-xss："><a aria-hidden="true" href="#存储型-xss："><span class="icon icon-link"></span></a>存储型 XSS：</h3><p>&lt;持久化&gt; 代码是存储在服务器中的，如在个人信息或发表文章等地方，加入代码，如果没有过滤或过滤不严，那么这些代码将储存到服务器中，每当有用户访问该页面的时候都会触发代码执行，这种 <code>XSS</code> 非常危险，容易造成蠕虫，大量盗窃 <code>cookie</code>（虽然还有种 <code>DOM</code> 型 <code>XSS</code>，但是也还是包括在存储型 <code>XSS</code> 内）。</p><h3 id="dom-型-xss"><a aria-hidden="true" href="#dom-型-xss"><span class="icon icon-link"></span></a>DOM 型 XSS</h3><p>基于文档对象模型 (<code>Document Objeet Model，DOM</code>)的一种漏洞。<code>DOM</code>是一个与平台、编程语言无关的接口，它允许程序或脚本动态地访问和更新文档内容、结构和样式，处理后的结果能够成为显示页面的一部分。<code>DOM</code> 中有很多对象，其中一些是用户可以操纵的，如 <code>uRI</code> ，<code>location</code>，<code>refelTer</code> 等。客户端的脚本程序可以通过 DOM 动态地检查和修改页面内容，它不依赖于提交数据到服务器端，而从客户端获得 <code>DOM</code> 中的数据在本地执行，如果 <code>DOM</code> 中的数据没有经过严格确认，就会产生 <code>DOM XSS</code> 漏洞。</p><h3 id="防御"><a aria-hidden="true" href="#防御"><span class="icon icon-link"></span></a>防御</h3><ol><li>对输入(和 <code>URL</code> 参数)进行过滤，对输出进行编码。也就是对提交的所有内容进行过滤，对 <code>url</code> 中的参数进行过滤，过滤掉会导致脚本执行的相关内容；</li><li>然后对动态输出到页面的内容进行 <code>html</code> 编码，使脚本无法在浏览器中执行。虽然对输入过滤可以被绕过，但是也还是会拦截很大一部分的 <code>XSS</code> 攻击。</li></ol><h2 id="csrf"><a aria-hidden="true" href="#csrf"><span class="icon icon-link"></span></a>CSRF</h2><p>跨站请求伪造，可以理解为攻击者盗用了用户的身份，以用户的名义发送了恶意请求，比如用户登录了一个网站后，立刻在另一个 <code>tab</code> 页面访问量攻击者用来制造攻击的网站，这个网站要求访问刚刚登陆的网站，并发送了一个恶意请求，这时候 <code>CSRF</code> 就产生了，比如这个制造攻击的网站使用一张图片，但是这种图片的链接却是可以修改数据库的，这时候攻击者就可以以用户的名义操作这个数据库。</p><h3 id="防御-1"><a aria-hidden="true" href="#防御-1"><span class="icon icon-link"></span></a>防御</h3><ol><li>验证 <code>HTTP Referer</code> 字段：根据 <code>HTTP</code> 协议，在 <code>HTTP</code> 头中有一个字段叫 <code>Referer</code> ，它记录了该 <code>HTTP</code> 请求的来源地址，每一个请求验证其 <code>Referer</code> 值即可</li><li>将 <code>cookie</code> 设置为 <code>HttpOnly</code>：程序（如 <code>JavaScript</code> 脚本、<code>Applet</code> 等）就无法读取到 <code>cookie</code> 信息，避免了攻击者伪造 <code>cookie</code> 的情况出现</li><li>在 <code>HTTP</code> 头中自定义属性，例如 <code>token</code>，并验证：在请求中放入攻击者所不能伪造的信息，并且该信总不存在于 <code>cookie</code> 之中。</li></ol><h2 id="点击劫持"><a aria-hidden="true" href="#点击劫持"><span class="icon icon-link"></span></a>点击劫持</h2><p>点击劫持是一种视觉欺骗的攻击手段。攻击者将需要攻击的网站通过 <code>iframe</code> 嵌套的方式嵌入自己的网页中，并将 <code>iframe</code> 设置为透明，在页面中透出一个按钮诱导用户点击。</p><h3 id="特点"><a aria-hidden="true" href="#特点"><span class="icon icon-link"></span></a>特点</h3><ul><li>隐蔽性较高，骗取用户操作</li><li>&quot;UI-覆盖攻击&quot;</li><li>利用 <code>iframe</code> 或者其它标签的属性</li></ul><h3 id="防御-2"><a aria-hidden="true" href="#防御-2"><span class="icon icon-link"></span></a>防御</h3><ol><li><code>X-FRAME-OPTIONS</code>: 是一个 <code>HTTP</code> 响应头，在现代浏览器有一个很好的支持。这个 <code>HTTP</code> 响应头 就是为了防御用 <code>iframe</code> 嵌套的点击劫持攻击。</li></ol><p>该响应头有三个值可选，分别是</p><ul><li>DENY，表示页面不允许通过 <code>iframe</code> 的方式展示</li><li>SAMEORIGIN，表示页面可以在相同域名下通过 <code>iframe</code> 的方式展示</li><li>ALLOW-FROM，表示页面可以在指定来源的 <code>iframe</code> 中展示</li></ul><ol start="2"><li><code>JavaScript</code> 防御: 对于某些远古浏览器来说，并不能支持上面的这种方式，那我们只有通过 JS 的方式来防御点击劫持了。</li></ol><div class="__dumi-default-code-block"><pre class="prism-code language-html"><button title="" type="button" class="__dumi-default-icon __dumi-default-btn-copy __dumi-default-code-block-copy-btn" data-clipboard-text="&lt;head&gt;
  &lt;style id=&quot;click-jack&quot;&gt;
    html {
      display: none !important;
    }
  &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;script dangerouslySetInnerHTML={{ __html: `
    if (self == top) {
      var style = document.getElementById(&#x27;click-jack&#x27;)
      document.body.removeChild(style)
    } else {
      top.location = self.location
    }
` }} /&gt;
&lt;/body&gt;
" data-status="copy"></button><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag">head</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token tag punctuation">&lt;</span><span class="token tag">style</span><span class="token tag"> </span><span class="token tag attr-name">id</span><span class="token tag attr-value punctuation">=</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag attr-value">click-jack</span><span class="token tag attr-value punctuation">&quot;</span><span class="token tag punctuation">&gt;</span><span class="token style language-css"></span></div><div class="token-line"><span class="token style language-css">    </span><span class="token style language-css selector">html</span><span class="token style language-css"> </span><span class="token style language-css punctuation">{</span><span class="token style language-css"></span></div><div class="token-line"><span class="token style language-css">      </span><span class="token style language-css property">display</span><span class="token style language-css punctuation">:</span><span class="token style language-css"> none </span><span class="token style language-css important">!important</span><span class="token style language-css punctuation">;</span><span class="token style language-css"></span></div><div class="token-line"><span class="token style language-css">    </span><span class="token style language-css punctuation">}</span><span class="token style language-css"></span></div><div class="token-line"><span class="token style language-css">  </span><span class="token tag punctuation">&lt;/</span><span class="token tag">style</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;/</span><span class="token tag">head</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;</span><span class="token tag">body</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  &lt;script dangerouslySetInnerHTML={{ __html: `</span></div><div class="token-line"><span class="token plain">    if (self == top) {</span></div><div class="token-line"><span class="token plain">      var style = document.getElementById(&#x27;click-jack&#x27;)</span></div><div class="token-line"><span class="token plain">      document.body.removeChild(style)</span></div><div class="token-line"><span class="token plain">    } else {</span></div><div class="token-line"><span class="token plain">      top.location = self.location</span></div><div class="token-line"><span class="token plain">    }</span></div><div class="token-line"><span class="token plain">` }} /&gt;</span></div><div class="token-line"><span class="token plain"></span><span class="token tag punctuation">&lt;/</span><span class="token tag">body</span><span class="token tag punctuation">&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span></div></pre></div><h2 id="url跳转漏洞"><a aria-hidden="true" href="#url跳转漏洞"><span class="icon icon-link"></span></a>URL跳转漏洞</h2><p>借助未验证的URL跳转，将应用程序引导到不安全的第三方区域，从而导致的安全问题。</p><h3 id="原理"><a aria-hidden="true" href="#原理"><span class="icon icon-link"></span></a>原理</h3><p>黑客利用URL跳转漏洞来诱导安全意识低的用户点击，导致用户信息泄露或者资金的流失。其原理是黑客构建恶意链接(链接需要进行伪装,尽可能迷惑),发在QQ群或者是浏览量多的贴吧/论坛中。 安全意识低的用户点击后,经过服务器或者浏览器解析后，跳到恶意的网站中。</p><h3 id="防御-3"><a aria-hidden="true" href="#防御-3"><span class="icon icon-link"></span></a>防御</h3><ol><li>referer的限制：如果确定传递URL参数进入的来源，我们可以通过该方式实现安全限制，保证该URL的有效性，避免恶意用户自己生成跳转链接</li><li>加入有效性验证Token：我们保证所有生成的链接都是来自于我们可信域的，通过在生成的链接里加入用户不可控的Token对生成的链接进行校验，可以避免用户生成自己的恶意链接从而被利用，但是如果功能本身要求比较开放，可能导致有一定的限制。</li></ol><h2 id="sql-注入"><a aria-hidden="true" href="#sql-注入"><span class="icon icon-link"></span></a>SQL 注入</h2><p>所谓 <code>SQL</code> 注入，就是通过把 <code>SQL</code> 命令插入到 <code>Web</code> 表单递交或输入域名或页面请求的查询字符串，最终达到欺骗服务器执行恶意的 <code>SQL</code> 命令，比如先前的很多影视网站泄露 <code>VIP</code> 会员密码大多就是通过 <code>WEB</code> 表单递交查询字符暴出的，这类表单特别容易受到 <code>SQL</code> 注入式攻击．当应用程序使用输入内容来构造动态 <code>sql</code> 语句以访问数据库时，会发生 <code>sql</code> 注入攻击。如果代码使用存储过程，而这些存储过程作为包含未筛选的用户输入的字符串来传递，也会发生 <code>sql</code> 注入。 黑客通过 <code>SQL</code> 注入攻击可以拿到网站数据库的访问权限，之后他们就可以拿到网站数据库中所有的数据，恶意的黑客可以通过 <code>SQL</code> 注入功能篡改数据库中的数据甚至会把数据库中的数据毁坏掉。做为网络开发者的你对这种黑客行为恨之入骨，当然也有必要了解一下 <code>SQL</code> 注入这种功能方式的原理并学会如何通过代码来保护自己的网站数据库</p><p>防御 <code>SQL</code> 注入</p><ol><li>进行输入验证；</li><li>使用 <code>ORM</code> 工具进行数据库访问；</li></ol><h2 id="os命令注入攻击"><a aria-hidden="true" href="#os命令注入攻击"><span class="icon icon-link"></span></a>OS命令注入攻击</h2><p><a href="https://www.zhihu.com/question/21606800" target="_blank" rel="noopener noreferrer">零基础如何学习 Web 安全？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><a href="https://www.jianshu.com/p/67408d73c66d" target="_blank" rel="noopener noreferrer">安全|常见的 Web 攻击手段之 CSRF 攻击<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div><div class="__dumi-default-layout-footer-meta"><span data-updated-text="Last Update: ">11/5/2020, 10:02:50 AM</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/umi.js"></script>
  </body>
</html>
