# 可变(Mutable)和不变(Immutable)对象的区别

掌握这个知识点是一个程序员的基本修养，值得认真学习。以下内容为摘抄总结。比方说说起String为什么是一个不可变对象，只知道因为它是被final修饰的所以不可变，而没有抓住不可变三个字的重点：

1. 不可变对象就是那些一旦被创建，它们的状态就不能被改变的对象，每次对它们的改变都是产生了新的对象
2. 可变对象就是那些创建后，状态依然可以被改变的对象

## Mutable对象

> 在JavaScript中，对象是引用类型的数据，其优点在于频繁地修改对象时都是在原对象的基础上修改，并不需要重新创建，这样就可以有效地利用内存，不会造成内存空间的浪费。

优点：

- 可变类型最少化拷贝以提高效率；
- 可获得更好的性能，也适合于在多个模块之间共享数据；

缺点：

- 可变性数据类型造成的错误非常难于跟踪和发现

## Immutable对象

> 每次修改一个immutable对象时都会创建一个新的不可变对象，在新对象上的操作不会影响到原对象的数据。

Immutable对象在修改数据时并不会复制一整份数据，而是将变化的节点与未变化的节点的父子关系转移到一个新节点上，而Mutable在复制时是“全量”。Immutable对象需要通过set和get来对数据进行读和写。

优点:

- 构造、测试和使用都很简单
- 线程安全且没有同步问题，不需要担心数据会被其它线程修改
- 当用作类的属性时不需要保护性拷贝
- 可以很好的用作Map键值和Set元素

缺点：
- 创建对象的开销，因为每一步操作都会产生一个新的对象。
